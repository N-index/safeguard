{% extends 'base.html' %}
{% from 'bootstrap/form.html' import render_form %}

{#{% block title %}SafeGuard - 展示所有用户{% endblock %}#}

{% block styles %}
    {{ super() }}
            <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='display.css') }}">
{% endblock styles %}


{% block mycontent %}

    <div class="search">
       {{ render_form(searchForm) }}
    </div>

    <div class="allusers">

        {% for user in userlist %}
            <div class="user">

            <div class="{% if user.status==0 %}user-head user-head-safe {% else %}user-head user-head-danger {% endif %}">
            <span>
                <span class="name">{{ user.username }}
                    <span class="tip profile-link">
                        <a href="{{ url_for('main.profile',device_id=user.device_id) }}">个人页面</a>
                    </span>
                </span>

                <span class="gender-age">
                    ({% if user.sex == 0 %}
                        男
                    {% else %}
                        女
                    {% endif %}
                    ,
                    {{user.age}}岁)
                </span>
                </span>

                <span class="device-id">
                    ID: {{ user.device_id }}
                    <span class="tip register-time">
                        激活时间:
                            {{ (user.activation_time|string)[0:10]}}
                    </span>
                </span>

            </div>

            <div class="user-status">
            <div class="status-detail">
            <div class="status-detail-temperature">
                🔷体温:
{#                <svg t="1583175208480" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3366" width="200" height="200"><path d="M408 692.8c0 47.1-43.3 84.3-92.6 74.5-29.8-5.9-53.3-29.2-59.3-58.8-9.9-48.9 27.6-91.8 75.2-91.8L604.4 346c3.7-3.6 8-6.7 12.7-9.1 12.4-6.2 34.9-11.6 58.2 11.5 23.2 23 18.1 45.6 12 58-2.4 4.9-5.6 9.4-9.5 13.2L408 692.8z" fill="#F4B3BA" p-id="3367"></path><path d="M331.1 776.8c-5.7 0-11.5-0.6-17.3-1.7-33.2-6.6-58.9-32.1-65.6-65-5.1-25.1 1.2-50.7 17.2-70.2 15.5-18.9 38.1-30.1 62.5-31.1l270.9-268.4c4.5-4.4 9.4-7.9 14.7-10.5 13.5-6.7 40.3-14 67.4 12.9 27.1 26.9 20.2 53.6 13.6 67.2-2.7 5.6-6.4 10.8-11 15.4L416 696.1c-0.9 23.9-12 46.1-30.7 61.4-15.3 12.6-34.4 19.3-54.2 19.3z m0.1-152.1c-20.8 0-40.3 9.2-53.5 25.3-12.9 15.8-18 36.6-13.9 56.9 5.4 26.6 26.2 47.2 53 52.5 20.9 4.1 42.1-1 58.2-14.2 15.8-13 24.9-32.1 24.9-52.4v-3.3L672 414.1c3.4-3.4 6.1-7.1 8-11.1 5.7-11.9 8.6-30-10.5-48.9s-37.2-15.9-49-10c-3.8 1.9-7.4 4.5-10.6 7.6l-275.4 273h-3.3z" fill="#8E7A8F" p-id="3368"></path><path d="M479.3 695.3l324.6-328.4c8-8 14.3-17 18.9-26.7 11.2-23.5 23.1-69.7-23.2-116.1-34-34-76.2-42.1-115.7-22.3-9.1 4.5-17.6 10.7-25.2 18.2L328.5 544.5c-40.9 1.9-78.8 20.8-104.9 52.7-27.5 33.6-38.3 77.7-29.7 121 5.7 28.2 19.4 53.3 38.9 72.7s44.5 33.2 72.7 38.9c43.3 8.7 87.4-2.1 121-29.7 31.9-26.1 50.9-64 52.8-104.8z m-73 80.1c-26.1 21.4-60.5 29.8-94.4 23-43.8-8.8-77.7-42.7-86.5-86.5-6.8-33.9 1.6-68.3 23-94.4 21.4-26.1 53.1-41.1 86.8-41.1h6.6l102.8-101.1 45.3 45.3c6.3 6.3 16.4 6.3 22.6 0 6.3-6.3 6.3-16.4 0-22.6l-45.1-45.1 36.2-35.5 44.8 44.8c6.3 6.3 16.4 6.3 22.6 0 6.3-6.3 6.3-16.4 0-22.6L526.4 395l36.2-35.5 44.3 44.3c6.3 6.3 16.4 6.3 22.6 0 6.3-6.3 6.3-16.4 0-22.6l-44.1-44.1 36.2-35.5 43.8 43.8c6.3 6.3 16.4 6.3 22.6 0 6.3-6.3 6.3-16.4 0-22.6l-43.6-43.6 36.6-36c5.3-5.2 11-9.3 17.1-12.4 27.6-13.8 54.1-8.3 78.7 16.3 30.8 30.8 26.2 60.3 17 79.6-3.1 6.4-7.4 12.5-12.8 18L447.4 682v6.6c0 33.7-15 65.4-41.1 86.8z" fill="#8E7A8F" p-id="3369"></path></svg>#}
                {% if user.body_temperature %}
                    {{user.body_temperature }}℃
                        {% else %}无数据
                    {% endif %}
            </div>
            <div class="status-detail-heartrate">
                🔷心率:
{#                <svg t="1583175396254" class="icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1834" width="200" height="200"><path d="M602.91712 773.408c-5.888 15.36-21.248 24.928-37.6 23.2a36.576 36.576 0 0 1-32.448-30.112l-29.6-172.512-2.528 15.104v0.064-0.032l-30.784 169.12a36.48 36.48 0 0 1-35.712 29.952h-0.416a36.352 36.352 0 0 1-35.744-29.088l-28.832-140.704-7.328 12c-6.72 10.656-18.4 17.344-30.976 17.344H128.16512c74.688 83.424 192.896 181.376 379.968 279.04 0.288 0.544 0.736 0.8 1.408 0.768 187.936-97.824 313.024-196.128 387.936-279.808h-254.08l-40.48 105.664z" fill="#d81e06" p-id="1835"></path><path d="M1024.29312 417.92v-0.32a268.032 268.032 0 0 0-266.752-294.816 268.16 268.16 0 0 0-244.704 158.56 268.16 268.16 0 0 0-244.736-158.528 268.064 268.064 0 0 0-266.752 294.912L0.00512 418.208s0 71.2 71.168 176.928h239.52l45.024-72.48a36.992 36.992 0 0 1 37.408-16.768c14.72 2.656 26.304 13.92 29.312 28.512l9.088 44.48 35.328-195.648c3.36-11.872 8.64-31.872 25.76-33.568l0.064-0.256c3.488-1.152 7.2-1.984 11.008-1.984h0.128c13.312 0 28.672 8.256 34.496 25.28h-0.064c0.64 1.76 1.152 3.52 1.44 5.44l42.464 244.992 2.016-4.928a36.16 36.16 0 0 1 34.112-23.072h336.16c71.2-105.728 71.2-176.928 71.2-176.928l-1.344-0.288zM275.71712 181.888a43.968 43.968 0 1 1 0.064 87.936 43.968 43.968 0 0 1-0.064-87.936z m-114.624 275.104a36.48 36.48 0 0 1-70.336 19.552 289.824 289.824 0 0 1-10.688-66.176c-3.744-103.232 59.232-153.536 62.432-156.032a36.48 36.48 0 0 1 45.088 57.472c-2.4 1.984-35.168 30.528-34.56 91.84l0.224-0.032-0.224 0.032c0.16 15.616 2.496 33.344 8.064 53.344z" fill="#d81e06" p-id="1836"></path></svg>#}
                {% if user.heart_rate %}
                    {{user.heart_rate }}/min
                        {% else %}无数据
                    {% endif %}
            </div>
            <div class="status-detail-oxygen">
                🔷血氧:
{#                <svg t="1583175464242" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2661" width="200" height="200"><path d="M0 512a512 512 0 1 0 1024 0A512 512 0 1 0 0 512z" fill="#d81e06" p-id="2662" data-spm-anchor-id="a313x.7781069.0.i6" class="selected"></path><path d="M521.572 459.446c0 23.477-117.57 130.031-117.57 252.839a121.544 121.544 0 0 0 117.57 126.42c65.016 0 117.57-60.862 117.57-126.42 1.445-120.46-116.125-228.459-117.57-252.84z m-152.065-210.4a147.37 147.37 0 0 0-15.351-8.307 78.019 78.019 0 0 0-20.77-5.96 75.671 75.671 0 0 0-12.46-2.708c-2.71-1.445-5.418-1.445-8.308-2.71a10.836 10.836 0 0 1-5.418-5.598 10.475 10.475 0 0 1-2.89-6.863 14.087 14.087 0 0 1 7.044-11.016 28.354 28.354 0 0 1 16.615-4.154 28.715 28.715 0 0 1 16.615 4.154 34.133 34.133 0 0 1 8.308 11.016 14.99 14.99 0 0 0 5.418 6.863 10.475 10.475 0 0 0 7.043 2.709 11.739 11.739 0 0 0 8.308-4.154 10.114 10.114 0 0 0 2.709-8.307 36.12 36.12 0 0 0-2.71-11.017 29.438 29.438 0 0 0-8.307-11.017 73.143 73.143 0 0 0-15.35-8.307 80.547 80.547 0 0 0-20.77-3.07 72.24 72.24 0 0 0-26.187 4.153 30.16 30.16 0 0 0-16.615 12.462 31.605 31.605 0 0 0-5.599 19.505 29.257 29.257 0 0 0 5.599 19.324 33.23 33.23 0 0 0 15.17 12.461 227.556 227.556 0 0 0 23.478 8.308 137.617 137.617 0 0 1 16.616 4.153 18.06 18.06 0 0 1 9.752 6.863 16.435 16.435 0 0 1 4.154 11.197 19.144 19.144 0 0 1-6.863 13.726 29.799 29.799 0 0 1-19.505 5.599 33.05 33.05 0 0 1-13.725-2.89 13.003 13.003 0 0 1-8.489-6.502 77.477 77.477 0 0 1-5.598-11.016 16.976 16.976 0 0 0-5.599-8.308 9.572 9.572 0 0 0-6.863-2.709 8.308 8.308 0 0 0-8.307 4.154 10.114 10.114 0 0 0-2.71 8.308 26.187 26.187 0 0 0 5.6 16.434 36.12 36.12 0 0 0 15.17 13.906 56.528 56.528 0 0 0 31.785 6.863 54.18 54.18 0 0 0 27.632-5.418 39.19 39.19 0 0 0 18.06-15.35 40.093 40.093 0 0 0 5.418-22.034 30.16 30.16 0 0 0-3.973-16.615c0.18-1.264-3.973-5.418-8.127-8.127z m118.834 36.12V255.91a46.414 46.414 0 0 0-4.153-21.13 26.187 26.187 0 0 0-12.462-12.462 59.237 59.237 0 0 0-24.742-5.598 54.18 54.18 0 0 0-23.658 4.153 26.548 26.548 0 0 0-13.726 9.572 21.491 21.491 0 0 0-4.154 12.462 10.475 10.475 0 0 0 2.71 7.043 11.378 11.378 0 0 0 7.223 2.89c2.89 0 5.599 0 5.599-1.445a13.906 13.906 0 0 0 4.154-6.863 44.97 44.97 0 0 1 8.307-7.946 33.772 33.772 0 0 1 13.906-2.71c6.863 0 12.462 1.265 13.726 4.154a19.866 19.866 0 0 1 4.154 13.726c-5.418 1.445-9.572 2.89-13.726 4.154a152.246 152.246 0 0 1-15.35 4.153c-5.419 1.445-9.573 1.445-11.017 2.89a29.077 29.077 0 0 0-18.06 9.572 25.645 25.645 0 0 0-6.863 16.615 23.84 23.84 0 0 0 4.154 13.906 23.297 23.297 0 0 0 11.016 9.572 28.715 28.715 0 0 0 16.615 4.154 36.12 36.12 0 0 0 18.06-4.154 55.263 55.263 0 0 0 16.615-11.017 28.896 28.896 0 0 0 8.308 9.753 12.461 12.461 0 0 0 6.863 4.154 19.144 19.144 0 0 0 8.307-2.89 7.585 7.585 0 0 0 4.154-6.863c0-1.445-1.445-4.154-2.709-9.752a16.796 16.796 0 0 1-3.973-11.017z m-23.478-11.016a48.04 48.04 0 0 1-2.709 18.06 30.883 30.883 0 0 1-9.752 8.127 21.853 21.853 0 0 1-13.725 2.89 16.435 16.435 0 0 1-11.198-4.154 13.184 13.184 0 0 1-4.153-9.752 8.488 8.488 0 0 1 4.153-8.308 24.923 24.923 0 0 0 7.044-4.154 100.775 100.775 0 0 0 13.725-2.709 75.13 75.13 0 0 0 15.351-4.154z m152.246-63.57a57.25 57.25 0 0 0-19.324-11.92 77.658 77.658 0 0 0-26.368-4.154 64.293 64.293 0 0 0-24.922 4.154 45.872 45.872 0 0 0-19.325 12.461 49.304 49.304 0 0 0-12.461 20.588 85.785 85.785 0 0 0 0 52.735 60.5 60.5 0 0 0 12.461 20.589 57.25 57.25 0 0 0 19.325 12.461 69.53 69.53 0 0 0 24.922 4.154 77.658 77.658 0 0 0 26.368-4.154 45.872 45.872 0 0 0 19.324-12.461 49.304 49.304 0 0 0 12.461-20.589 85.785 85.785 0 0 0 0-52.735 49.304 49.304 0 0 0-12.461-21.31z m-23.478 76.032a27.09 27.09 0 0 1-22.214 11.016 25.284 25.284 0 0 1-16.615-5.418 37.745 37.745 0 0 1-11.016-13.906 52.013 52.013 0 0 1-4.154-20.769 59.237 59.237 0 0 1 4.154-22.755 26.91 26.91 0 0 1 11.016-13.726 28.715 28.715 0 0 1 16.615-4.154 27.09 27.09 0 0 1 22.214 11.017 47.678 47.678 0 0 1 8.308 30.521 44.428 44.428 0 0 1-8.308 27.993z m147.911 12.461a20.227 20.227 0 0 0-11.016-2.89H683.57a16.976 16.976 0 0 1 4.153-5.418 105.47 105.47 0 0 1 18.06-16.615 131.657 131.657 0 0 0 19.325-16.615 117.21 117.21 0 0 0 11.197-13.906 33.05 33.05 0 0 0 5.418-20.769 46.234 46.234 0 0 0-2.71-13.726 30.883 30.883 0 0 0-6.862-11.016 72.24 72.24 0 0 0-11.197-8.308 56.889 56.889 0 0 0-23.478-4.154 69.892 69.892 0 0 0-19.324 2.71 117.751 117.751 0 0 0-13.906 8.307 33.41 33.41 0 0 0-8.308 12.461 44.066 44.066 0 0 0-2.71 12.462 22.394 22.394 0 0 0 2.71 8.307 11.378 11.378 0 0 0 7.043 2.71 22.394 22.394 0 0 0 8.308-2.71c1.264-2.89 2.709-5.598 4.154-9.752a42.08 42.08 0 0 1 2.709-6.863 20.408 20.408 0 0 1 18.06-9.752 18.06 18.06 0 0 1 9.571 2.89 16.073 16.073 0 0 1 7.044 6.862 27.27 27.27 0 0 1 2.709 9.572 36.12 36.12 0 0 1-2.71 11.197 46.956 46.956 0 0 1-7.043 11.017 48.04 48.04 0 0 1-12.461 11.016 165.79 165.79 0 0 0-13.726 11.197 246.157 246.157 0 0 0-22.213 20.77 39.37 39.37 0 0 0-5.599 8.126 77.116 77.116 0 0 0-2.709 8.308 9.752 9.752 0 0 0 4.154 8.308 13.184 13.184 0 0 0 11.017 4.153h66.46a11.558 11.558 0 0 0 8.308-2.709 10.294 10.294 0 0 0 2.709-6.862c2.709-4.335 1.264-7.224-0.18-8.489z" fill="#FFFFFF" p-id="2663"></path></svg>#}
                {% if user.blood_oxygen %}
                    {{ "%.1f"|format(user.blood_oxygen*100)}}%
                        {% else %}无数据
                    {% endif %}
            </div>


<div class="latitude">
                🌐经度:
<span class="tip locate-type">
    定位方式: {{ user.locate_type }}
</span>
    {% if user.latitude %}
                    {{user.latitude }}
                        {% else %}无数据
                    {% endif %}

</div>
            <div class="longitude">

                🌐纬度:
            <span class="tip locate-type">
    定位方式: {{ user.locate_type }}
</span>
                {% if user.longitude %}
                    {{user.longitude }}
                        {% else %}无数据
                    {% endif %}
            </div>
</div>

            <div class="status-total">
                {% if user.status==0 %}😀<br><span>一切正常</span>
                {% elif user.status==1 %}😷<br><span>体温异常</span>
                {% elif user.status==2 %}💔<br><span>心率异常</span>
                {% elif user.status==3 %}😖<br><span>血氧异常</span>
                {% elif user.status==4 %}🤕<br><span>意外跌落</span>
                {% endif %}


            </div>

            </div>




<div class="other-info">
    <span class="last-sync-time">
        同步时间: {{ user.last_sync }}
    </span>
     <span class="address">
         家庭地址: {{ user.location }}
     </span>





</div>

                    <div class="tel">
                        <span>📞
                    {{ user.telephone }}</span>
                        </div>

            </div>


        {% endfor %}
    </div>
{% endblock %}

{% block scripts %}
    {{ super()}}
    <script  src="{{ url_for('static',filename='display.js') }}"></script>

{% endblock %}}






